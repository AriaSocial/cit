<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChibaTech 出欠登録</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="site-header">
        <h1 class="site-title">ChibaTech 出欠登録</h1>
        <button class="menu-toggle" id="menu-toggle" aria-label="メニューを開く" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </header>
    <nav class="main-nav" id="main-nav">
        <ul>
            <li><a href="./">ホーム</a></li>
            <li><a href="./contact-us/">お問い合わせ</a></li>
            <li class="nav-separator"><hr></li>
            <li><a href="https://portal.it-chiba.ac.jp/" target="_blank" rel="noopener noreferrer">CIT ポータル</a></li>
            <li><a href="https://cit.manaba.jp/" target="_blank" rel="noopener noreferrer">manaba</a></li>
        </ul>
    </nav>
    <div class="header-lines">
        <div class="line-thin"></div>
        <div class="line-thick"></div>
    </div>

    <div class="outer-container">
        <div class="day-display-container">
            <p id="current-day"></p>
        </div>
        <div class="classroom-button-container">
            <button class="classroom-entry-button" onclick="showMenu('classroomNumberMenu')">講義室を指定</button>
            <button id="adminMenuButton" class="classroom-entry-button admin-button" onclick="showMenu('adminMenu')" style="display: none;">管理メニュー</button>
        </div>
        <div class="divider-wrapper">
            <p id="admin-mode-indicator">管理モードが有効です</p>
            <hr class="divider">
        </div>
        <div id="mondaySections" class="weekday-sections"></div>
        <div id="tuesdaySections" class="weekday-sections"></div>
        <div id="wednesdaySections" class="weekday-sections"></div>
        <div id="thursdaySections" class="weekday-sections"></div>
        <div id="fridaySections" class="weekday-sections"></div>
        <div id="saturdaySections" class="weekday-sections"></div>
        <div id="sundaySections" class="weekday-sections"></div>
    </div>

    <div id="welcomeOverlay" class="menu-overlay">
        <div class="menu-content">
            <h2>ChibaTech 出欠登録</h2>
            <div class="scrollable-content">
                <p>このサイトは、非公式の出欠登録ツールです。<strong>授業開始30分前から授業開始60分後まで</strong>、該当講義の出欠登録ページへのリンクが表示されます。</p>
                <div class="faq-section">
                    <hr>
                    <p class="faq-title">よくある質問</p>
                    <ul class="welcome-instructions-list">
                        <li>
                            <strong>Q. 時間になってもリンクが表示されません。</strong>
                            <p>A. ページを再読み込みしてください。それでも表示されない場合は、ページ左上の「講義室を指定」から、講義室番号を直接入力して出欠登録を行ってください。</p>
                        </li>
                        <li>
                            <strong>Q. グレーアウトしているボタンがあります。</strong>
                            <p>A. その科目は講義室番号が未登録です。お手数ですが、ページ右上のメニュー（三本線）から、講義名と講義室番号をご連絡いただけると助かります。</p>
                        </li>
                        <li>
                            <strong>Q. 出欠登録ページへのリンクが正しくありません。</strong>
                            <p>A. 申し訳ございません。すぐに修正いたしますので、ページ右上のメニュー（三本線）から、該当の講義名と正しい講義室番号をお知らせください。</p>
                        </li>
                    </ul>
                </div>
                <div class="welcome-checkbox-container">
                    <input type="checkbox" id="dontShowTodayCheckbox">
                    <label for="dontShowTodayCheckbox">今日は表示しない</label>
                </div>
            </div>
            <button class="close-menu-button" onclick="hideWelcomeOverlay()">閉じる</button>
        </div>
    </div>


    <div id="classroomNumberMenu" class="menu-overlay">
        <div class="menu-content">
            <h2>講義室番号を指定して出欠登録</h2>
            <input type="text" id="classroomNumberInput" placeholder="講義室番号を入力">
            <div class="menu-button-container">
                <button class="classroom-submit-button" onclick="submitClassroomNumber()">出欠登録</button>
                <button class="close-menu-button" onclick="hideMenu('classroomNumberMenu')">閉じる</button>
            </div>
        </div>
    </div>

    <div id="adminMenu" class="menu-overlay">
        <div class="menu-content">
            <h2>管理メニュー</h2>
            <div class="scrollable-content">
                <div class="admin-toggles-container">
                    <div class="toggle-switch-container">
                        <span>管理モード</span>
                        <label class="switch">
                            <input type="checkbox" id="adminModeToggle" onchange="toggleAdminMode(this.checked)">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="toggle-switch-container admin-option">
                        <span>講義全表示</span>
                        <label class="switch">
                            <input type="checkbox" id="showAllClassesToggle" onchange="toggleShowAllClasses(this.checked)">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
                <div class="admin-action-wrapper admin-option">
                    <p class="control-label">スーパーリロード</p>
                    <button class="admin-action-button" onclick="superReloadPage()">実行</button>
                </div>
                <div class="day-selection-wrapper admin-option">
                    <p class="force-display-label">強制表示</p>
                    <div class="day-selection-grid">
                        <button onclick="setDisplayedDay(event, 1)">月曜日</button>
                        <button onclick="setDisplayedDay(event, 2)">火曜日</button>
                        <button onclick="setDisplayedDay(event, 3)">水曜日</button>
                        <button onclick="setDisplayedDay(event, 4)">木曜日</button>
                        <button onclick="setDisplayedDay(event, 5)">金曜日</button>
                        <button onclick="setDisplayedDay(event, 6)">土曜日</button>
                        <button onclick="setDisplayedDay(event, 0)">日曜日</button>
                        <button class="reset-button" onclick="resetDisplayedDay(event)">解除</button>
                    </div>
                </div>
                <div class="welcome-overlay-controls admin-option">
                    <p class="control-label">ウェルカム表示</p>
                    <button class="admin-action-button" onclick="resetWelcomeOverlay()">次回アクセス時に再表示</button>
                    <button class="admin-action-button" onclick="showWelcomeOverlayNow()">今すぐ再表示</button>
                </div>
            </div>
            <button class="close-menu-button" onclick="hideMenu('adminMenu')">閉じる</button>
        </div>
    </div>

    <!-- Template for a single course card -->
    <template id="course-card-template">
        <div class="content-container">
            <div class="left-aligned-container">
                <p class="course-time"></p>
            </div>
            <h1></h1>
            <button class="transition-button">出欠登録</button>
        </div>
    </template>

    <!-- Template for a dynamic choice menu -->
    <template id="choice-menu-template">
        <div class="menu-overlay">
            <div class="menu-content">
                <h2></h2>
                <div class="class-buttons-grid"></div>
                <button class="close-menu-button" onclick="this.closest('.menu-overlay').style.display='none'">閉じる</button>
            </div>
        </div>
    </template>

    <script src="script.js"></script>
</body>
</html>